<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
             x:Class="ioscado.MainPage"
             BackgroundColor="Black"
             ios:Page.UseSafeArea="True"
             Title="">
    <Grid>
        <BoxView IsVisible="True" Opacity="0.4">
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#001F3F" Offset="0.0" />
                    <GradientStop Color="#000000" Offset="0.5" />
                    <GradientStop Color="#003300" Offset="1.0" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>

        <Grid RowDefinitions="Auto, Auto, Auto, *" Padding="20,10,20,0">

            <StackLayout Grid.Row="0" Margin="0,10,0,25">
                <Label Text="SCOUT AI" 
                       TextColor="White" 
                       FontSize="36" 
                       FontAttributes="Bold" 
                       FontFamily="Helvetica Neue"/>
                <Label Text="Intelligence System v26.0" 
                       TextColor="#8E8E93" 
                       FontSize="13" 
                       CharacterSpacing="3"
                       TextTransform="Uppercase"/>
            </StackLayout>

            <Border Grid.Row="1" StrokeThickness="0" BackgroundColor="#1C1C1E" StrokeShape="RoundRectangle 25" Margin="0,0,0,25">
                <Border.Shadow>
                    <Shadow Brush="#0A84FF" Offset="0,8" Radius="15" Opacity="0.15"/>
                </Border.Shadow>

                <StackLayout Padding="20" Spacing="15">
                    <Button x:Name="btnNhapDuLieu"
                            Text="SCAN DATA STREAM"
                            Clicked="OnNhapDuLieuClicked"
                            TextColor="White"
                            FontAttributes="Bold"
                            FontSize="14"
                            CornerRadius="18"
                            HeightRequest="55"
                            BorderWidth="0">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#007AFF" Offset="0.0"/>
                                <GradientStop Color="#00C7BE" Offset="1.0"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>

                    <Button Text="GENERATE VERDICT"
                            Clicked="OnPromptKetHopClicked"
                            TextColor="Black"
                            FontAttributes="Bold"
                            FontSize="14"
                            CornerRadius="18"
                            HeightRequest="50"
                            BorderWidth="0">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#30D158" Offset="0.0"/>
                                <GradientStop Color="#B2F2BB" Offset="1.0"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                </StackLayout>
            </Border>

            <Border Grid.Row="2" Stroke="#333333" StrokeThickness="1" BackgroundColor="#151517" StrokeShape="RoundRectangle 20" Margin="0,0,0,25" Padding="20">
                <StackLayout Spacing="12">
                    <Label Text="TARGET MODE" TextColor="#636366" FontSize="11" FontAttributes="Bold" CharacterSpacing="1"/>

                    <HorizontalStackLayout Spacing="10">
                        <RadioButton x:Name="radPrompt1" IsChecked="True" GroupName="Mode"/>
                        <Label Text="Deep Research (AI Thinking)" TextColor="White" VerticalOptions="Center" FontSize="14"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <RadioButton x:Name="radPrompt2" GroupName="Mode"/>
                        <Label Text="Score Prediction (Pro)" TextColor="White" VerticalOptions="Center" FontSize="14"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <RadioButton x:Name="radPrompt3" GroupName="Mode"/>
                        <Label Text="Scout Radar (Bóng cỏ)" TextColor="White" VerticalOptions="Center" FontSize="14"/>
                    </HorizontalStackLayout>
                </StackLayout>
            </Border>

            <CollectionView x:Name="MatchList" Grid.Row="3" SelectionMode="None">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="12"/>
                </CollectionView.ItemsLayout>
                <CollectionView.Footer>
                    <BoxView HeightRequest="40" Color="Transparent"/>
                </CollectionView.Footer>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border StrokeThickness="0" StrokeShape="RoundRectangle 22" BackgroundColor="{Binding RowBackgroundColor}">
                            <Grid ColumnDefinitions="70, *, 85" Padding="15,12">

                                <Border Grid.Column="0" Stroke="#333333" StrokeThickness="1" BackgroundColor="#252525" StrokeShape="RoundRectangle 14" HeightRequest="48" WidthRequest="55" VerticalOptions="Center" HorizontalOptions="Start">
                                    <Label Text="{Binding DisplayTime}" 
                                           HorizontalTextAlignment="Center" VerticalTextAlignment="Center"
                                           TextColor="#0A84FF" FontSize="11" FontAttributes="Bold"/>
                                </Border>

                                <StackLayout Grid.Column="1" VerticalOptions="Center" Padding="5,0" Spacing="2">
                                    <Label Text="{Binding LeagueName}" TextColor="{Binding LeagueColor}" FontSize="10" TextTransform="Uppercase" FontAttributes="Bold" LineBreakMode="TailTruncation"/>
                                    <Label Text="{Binding MatchTitle}" TextColor="White" FontSize="14" FontAttributes="Bold" MaxLines="2" LineBreakMode="TailTruncation"/>
                                </StackLayout>

                                <StackLayout Grid.Column="2" VerticalOptions="Center" HorizontalOptions="End" Spacing="4">
                                    <Button Text="COPY"
                                            FontSize="11"
                                            HeightRequest="34"
                                            WidthRequest="75"
                                            CornerRadius="17"
                                            Padding="0"
                                            BackgroundColor="#3A3A3C"
                                            TextColor="White"
                                            FontAttributes="Bold"
                                            Clicked="OnSaoChepClicked"
                                            CommandParameter="{Binding .}"/>

                                    <Label Text="{Binding BlvCount, StringFormat='• {0} Nguồn'}"
                                           TextColor="#8E8E93" FontSize="9" HorizontalTextAlignment="Center"/>
                                </StackLayout>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>
    </Grid>
</ContentPage>